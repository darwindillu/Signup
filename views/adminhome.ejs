<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/adminhome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
    <body>
        <nav>
          <input type="checkbox" id="check">
          <label for="check" class="checkbtn">
            <i class="fas fa-bars"></i>
          </label>
          <label class="logo">Admin Page</label>
              
            
            <ul>
              <li>
                <form action="/admin/search" method="post" class="input-group">
                  <input name="username" id="searchInput" class="form-control rounded" placeholder="Search by username" aria-label="Search" aria-describedby="search-addon" />
                  <button type="submit" class="btn btn-secondary">search</button>
                </form>
              </li>
            <li><a href="/adduser">Add User</a></li>
            <li><a href="/admin/logout">Logout</a></li>
          </ul>
        </nav>
     
        <table style="text-align: center;" class="table table-bordered">
          <thead>
            <tr class="table-dark">
              
                <th scope="col">NO</th>
                <th scope="col">NAME</th>
                <th scope="col">EMAIL</th>
                <th scope="col">ACTION</th>
              
            </tr>
          </thead>
          <tbody>
           
              
                <% users.forEach((collections, index) => { %>
                  
                  <tr>
                     <td><%= index + 1 %></td>
                     <td><%= collections.username %></td>
                     <td><%= collections.email %></td>
                     <td>
                      <a href="/admin/updateuser/<%= collections._id %>" class="text-sucess">
                        <i class="fas fa-edit fa-lg mx-1"></i>
                    </a>                      <a  style="color: red;" class="delete-btn" id="<%= collections._id %>" href="/admin/deleteuser/<%= collections._id %>" class="text-danger" ><i class="fas fa-trash fa-lg mx-1"></i></a>
                  </td>
                  </tr>
               <% }); %>
          
           
              </tbody>
              </table>
      
      <script>
        for (const element of document.getElementsByClassName('delete-btn')) {
          element.addEventListener('click', (e) => {
            e.preventDefault();
            let choice = confirm("Are you sure you wish to delete?");
            if (choice) {
              window.location.href = e.currentTarget.href;
            }
          });
        }
      </script>
        
    </body>
</html>
